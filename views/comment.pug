extends layout

//- 댓글 믹스인 정의
mixin comment(comment)
  .comment(id=`comment-${comment.id}`)
    p.comment-content= comment.content
    p.comment-author= comment.user_nickname
    p.comment-date= comment.created_at
    p.comment-likes Likes: #{comment.likes}
    button.like-button(data-id=comment.id) 공감
    button.reply-button(data-id=comment.id) 답글
    button.report-button(data-id=comment.id) 신고
    if comment.replies
      .replies
        each reply in comment.replies
          +comment(reply)

block content
  hr(style="width: 100%; height: 2px; background-color: gray; border: none; margin: 20px auto;")
  p 총 댓글 수: #{comments.length}

  // 댓글 섹션
  .comments-section
    #comments-list
      each comment in comments
        if !comment.parent_id
          +comment(comment)
    
    if user
      form#comment-form
        textarea(name="content", placeholder="댓글을 입력하세요")
        button(type="submit") 댓글 작성
    else
      p 댓글을 작성하려면 로그인이 필요합니다.

block scripts
  script(src='/js/comment.js')
